<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Citizenship Week Competition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-blue-50 to-purple-50">
    <div class="max-w-6xl mx-auto p-6">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-gray-800 mb-2">
                🏆 Digital Citizenship Week Competition 🏆
            </h1>
            <p class="text-lg text-gray-600">Complete daily challenges and climb the leaderboard!</p>
            <div class="mt-4 space-x-4">
                <button onclick="exportData()" class="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors">
                    📁 Export Data
                </button>
                <button onclick="resetData()" class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors">
                    🔄 Reset All Data
                </button>
            </div>
        </div>

        <!-- Day Navigation -->
        <div class="flex flex-wrap justify-center gap-2 mb-8" id="dayNavigation">
            <!-- Will be populated by JavaScript -->
        </div>

        <div class="grid lg:grid-cols-3 gap-8">
            <!-- Student Registration & Activities -->
            <div class="lg:col-span-2">
                <!-- Add Student -->
                <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
                    <h3 class="text-xl font-bold mb-4">👥 Add Student</h3>
                    <div class="flex gap-2">
                        <input
                            type="text"
                            id="studentInput"
                            placeholder="Enter student name"
                            class="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                            onkeypress="handleEnter(event)"
                        />
                        <button
                            onclick="addStudent()"
                            class="px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors"
                        >
                            Add
                        </button>
                    </div>
                </div>

                <!-- Current Day Challenge -->
                <div class="bg-white rounded-lg shadow-lg p-6 mb-6" id="challengeSection">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>

            <!-- Leaderboard -->
            <div>
                <div class="bg-white rounded-lg shadow-lg p-6 sticky top-6">
                    <h3 class="text-xl font-bold mb-4">🏆 Leaderboard</h3>
                    <div id="leaderboard">
                        <p class="text-gray-500 text-center py-8">No students yet. Add some students to get started!</p>
                    </div>

                    <!-- Points Legend -->
                    <div class="mt-6 pt-4 border-t border-gray-200">
                        <h4 class="font-semibold mb-2">Daily Points:</h4>
                        <div class="text-sm space-y-1">
                            <div class="flex justify-between">
                                <span>Question Correct:</span>
                                <span class="font-semibold">50 pts</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Task Completed:</span>
                                <span class="font-semibold">30-40 pts</span>
                            </div>
                        </div>
                        <div class="mt-2 text-xs text-gray-500">
                            <span class="inline-block w-2 h-2 bg-blue-500 rounded-full mr-1"></span>Question
                            <span class="inline-block w-2 h-2 bg-green-500 rounded-full mr-1 ml-3"></span>Task
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Result Message -->
        <div id="resultMessage" class="fixed top-4 right-4 p-4 rounded-lg hidden z-50"></div>
    </div>

    <script>
        // Competition data
        let currentDay = 0;
        let students = JSON.parse(localStorage.getItem('digitalCitizenshipStudents') || '[]');
        let selectedAnswer = '';

        const days = [
            {
                day: 'Monday',
                theme: 'Watch Your Digital Footprint',
                color: 'bg-blue-500',
                icon: '👣',
                question: 'What is a digital footprint?',
                options: [
                    'The size of your computer screen',
                    'All the traces you leave online through your activities',
                    'Your internet password',
                    'The speed of your internet connection'
                ],
                correct: 1,
                task: 'Upload a photo wearing silly socks/footwear',
                padletUrl: 'YOUR_MONDAY_PADLET_URL_HERE',
                padletTitle: 'Monday: Silly Socks Digital Footprint',
                points: { question: 50, task: 30 }
            },
            {
                day: 'Tuesday',
                theme: 'Hats On, Screens Off!',
                color: 'bg-green-500',
                icon: '🎩',
                question: 'What is a healthy daily screen time limit for students?',
                options: [
                    'No limit - use screens as much as you want',
                    '1-2 hours for entertainment, more for schoolwork',
                    '10+ hours per day',
                    'Only 10 minutes per day total'
                ],
                correct: 1,
                task: 'Share 3 offline activities you did while wearing a hat',
                padletUrl: 'YOUR_TUESDAY_PADLET_URL_HERE',
                padletTitle: 'Tuesday: Hat Photos & Offline Activities',
                points: { question: 50, task: 30 }
            },
            {
                day: 'Wednesday',
                theme: 'Kindness Counts Day',
                color: 'bg-yellow-500',
                icon: '💖',
                question: 'What should you do if you see cyberbullying online?',
                options: [
                    'Join in with the bullying',
                    'Ignore it completely',
                    'Report it and support the victim kindly',
                    'Share it with more people'
                ],
                correct: 2,
                task: 'Write 3 kind messages and wear bright colors in your photo',
                padletUrl: 'YOUR_WEDNESDAY_PADLET_URL_HERE',
                padletTitle: 'Wednesday: Kindness Messages & Bright Colors',
                points: { question: 50, task: 30 }
            },
            {
                day: 'Thursday',
                theme: 'Be a Good Sport Online',
                color: 'bg-purple-500',
                icon: '⚽',
                question: 'How should you react when losing an online game?',
                options: [
                    'Quit immediately and blame teammates',
                    'Say "good game" and learn from the experience',
                    'Call the winners cheaters',
                    'Break your device in anger'
                ],
                correct: 1,
                task: 'Upload photo in sports team gear + create a team chant about digital citizenship',
                padletUrl: 'YOUR_THURSDAY_PADLET_URL_HERE',
                padletTitle: 'Thursday: Sports Gear & Team Chants',
                points: { question: 50, task: 40 }
            },
            {
                day: 'Friday',
                theme: 'School Spirit Day',
                color: 'bg-red-500',
                icon: '🏫',
                question: 'Why is it important to represent your school positively online?',
                options: [
                    'It doesn\'t matter what you post',
                    'Your online behavior reflects on your entire school community',
                    'Only teachers need to worry about this',
                    'You should only post negative things about school'
                ],
                correct: 1,
                task: 'Wear school colors/gear + write a Digital Citizenship Pledge for your school',
                padletUrl: 'YOUR_FRIDAY_PADLET_URL_HERE',
                padletTitle: 'Friday: School Spirit & Digital Citizenship Pledges',
                points: { question: 50, task: 40 }
            }
        ];

        function saveData() {
            localStorage.setItem('digitalCitizenshipStudents', JSON.stringify(students));
        }

        function handleEnter(event) {
            if (event.key === 'Enter') {
                addStudent();
            }
        }

        function addStudent() {
            const input = document.getElementById('studentInput');
            const name = input.value.trim();
            
            if (name && !students.find(s => s.name === name)) {
                students.push({
                    name: name,
                    totalPoints: 0,
                    dailyProgress: Array(5).fill().map(() => ({ question: false, task: false, points: 0 }))
                });
                input.value = '';
                saveData();
                updateDisplay();
            }
        }

        function setCurrentDay(dayIndex) {
            currentDay = dayIndex;
            selectedAnswer = '';
            updateDisplay();
        }

        function setAnswer(answerIndex) {
            selectedAnswer = answerIndex;
        }

        function openPadlet() {
            const currentDayData = days[currentDay];
            if (currentDayData.padletUrl && currentDayData.padletUrl !== 'YOUR_MONDAY_PADLET_URL_HERE') {
                window.open(currentDayData.padletUrl, '_blank');
            } else {
                alert('Padlet URL not set yet. Please add your Padlet URLs to the code.');
            }
        }

        function submitAnswer() {
            const studentSelect = document.getElementById('questionStudentSelect');
            const studentName = studentSelect.value;
            
            if (!studentName || selectedAnswer === '') return;

            const correctAnswer = days[currentDay].correct;
            const isCorrect = parseInt(selectedAnswer) === correctAnswer;
            const points = isCorrect ? days[currentDay].points.question : 0;
            
            const student = students.find(s => s.name === studentName);
            student.dailyProgress[currentDay].question = true;
            student.dailyProgress[currentDay].points += points;
            student.totalPoints += points;
            
            saveData();
            selectedAnswer = '';
            
            showMessage(`${isCorrect ? '✅ Correct!' : '❌ Incorrect.'} ${isCorrect ? `+${points} points!` : 'Better luck next time!'}`, isCorrect);
            updateDisplay();
        }

        function submitTask() {
            const studentSelect = document.getElementById('taskStudentSelect');
            const checkbox = document.getElementById('taskCompleted');
            const studentName = studentSelect.value;
            
            if (!studentName || !checkbox.checked) {
                alert('Please select a student and confirm the task was completed on Padlet.');
                return;
            }

            const points = days[currentDay].points.task;
            
            const student = students.find(s => s.name === studentName);
            student.dailyProgress[currentDay].task = true;
            student.dailyProgress[currentDay].points += points;
            student.totalPoints += points;
            
            saveData();
            checkbox.checked = false;
            
            showMessage(`✅ Task completed! +${points} points!`, true);
            updateDisplay();
        }

        function showMessage(message, isSuccess) {
            const messageDiv = document.getElementById('resultMessage');
            messageDiv.textContent = message;
            messageDiv.className = `fixed top-4 right-4 p-4 rounded-lg z-50 ${isSuccess ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`;
            messageDiv.classList.remove('hidden');
            
            setTimeout(() => {
                messageDiv.classList.add('hidden');
            }, 3000);
        }

        function exportData() {
            if (students.length === 0) return;
            
            const dataStr = JSON.stringify(students, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            const link = document.createElement('a');
            link.setAttribute('href', dataUri);
            link.setAttribute('download', 'digital-citizenship-data.json');
            link.click();
        }

        function resetData() {
            if (confirm('Are you sure you want to reset all data? This cannot be undone.')) {
                students = [];
                localStorage.removeItem('digitalCitizenshipStudents');
                updateDisplay();
            }
        }

        function updateDisplay() {
            updateDayNavigation();
            updateChallenge();
            updateLeaderboard();
        }

        function updateDayNavigation() {
            const nav = document.getElementById('dayNavigation');
            nav.innerHTML = days.map((day, index) => `
                <button
                    onclick="setCurrentDay(${index})"
                    class="px-4 py-2 rounded-lg font-semibold transition-all ${
                        currentDay === index 
                            ? `${day.color} text-white` 
                            : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                    }"
                >
                    ${day.icon} ${day.day}
                </button>
            `).join('');
        }

        function updateChallenge() {
            const currentDayData = days[currentDay];
            const challengeSection = document.getElementById('challengeSection');
            
            const availableStudentsQuestion = students.filter(s => !s.dailyProgress[currentDay].question);
            const availableStudentsTask = students.filter(s => !s.dailyProgress[currentDay].task);
            
            challengeSection.innerHTML = `
                <div class="${currentDayData.color} text-white p-4 rounded-lg mb-6">
                    <h2 class="text-2xl font-bold mb-2">
                        ${currentDayData.icon} ${currentDayData.day}: ${currentDayData.theme}
                    </h2>
                </div>

                <!-- Question Section -->
                <div class="mb-8">
                    <h3 class="text-lg font-bold mb-4">⭐ Question (${currentDayData.points.question} points)</h3>
                    <p class="text-gray-700 mb-4 font-medium">${currentDayData.question}</p>
                    
                    <div class="space-y-2 mb-4">
                        ${currentDayData.options.map((option, index) => `
                            <label class="flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer">
                                <input
                                    type="radio"
                                    name="answer"
                                    value="${index}"
                                    onchange="setAnswer(${index})"
                                    class="mr-3"
                                />
                                <span class="font-medium mr-2">${String.fromCharCode(65 + index)}.</span>
                                <span>${option}</span>
                            </label>
                        `).join('')}
                    </div>

                    <select 
                        id="questionStudentSelect"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 mb-2"
                    >
                        <option value="">Select a student to submit answer</option>
                        ${availableStudentsQuestion.map(student => `
                            <option value="${student.name}">${student.name}</option>
                        `).join('')}
                    </select>
                    
                    <button 
                        onclick="submitAnswer()" 
                        class="w-full px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors"
                    >
                        Submit Answer
                    </button>
                </div>

                <!-- Task Section with Padlet Integration -->
                <div>
                    <h3 class="text-lg font-bold mb-4">✅ Daily Task (${currentDayData.points.task} points)</h3>
                    <p class="text-gray-700 mb-4 font-medium">${currentDayData.task}</p>
                    
                    <!-- Padlet Instructions -->
                    <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mb-4">
                        <h4 class="font-semibold text-blue-800 mb-2">📋 How to Complete This Task:</h4>
                        <ol class="text-blue-700 text-sm space-y-1 ml-4">
                            <li>1. Complete the task (take photo, write messages, etc.)</li>
                            <li>2. Click the Padlet button below to open today's submission board</li>
                            <li>3. Upload your photo/response to the Padlet</li>
                            <li>4. Come back here and check the box to claim your points!</li>
                        </ol>
                    </div>

                    <!-- Padlet Button -->
                    <button 
                        onclick="openPadlet()" 
                        class="w-full px-4 py-2 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 transition-colors mb-4 flex items-center justify-center"
                    >
                        🎨 Open ${currentDayData.padletTitle}
                    </button>

                    <!-- Task Completion -->
                    <div class="border border-gray-200 rounded-lg p-4 mb-4">
                        <label class="flex items-center cursor-pointer">
                            <input
                                type="checkbox"
                                id="taskCompleted"
                                class="mr-3 w-4 h-4"
                            />
                            <span class="text-sm">✅ I have uploaded my response to the Padlet above</span>
                        </label>
                    </div>

                    <select 
                        id="taskStudentSelect"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 mb-2"
                    >
                        <option value="">Select a student to award task points</option>
                        ${availableStudentsTask.map(student => `
                            <option value="${student.name}">${student.name}</option>
                        `).join('')}
                    </select>
                    
                    <button 
                        onclick="submitTask()" 
                        class="w-full px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors"
                    >
                        Award Task Points
                    </button>
                </div>
            `;
        }

        function updateLeaderboard() {
            const leaderboard = document.getElementById('leaderboard');
            
            if (students.length === 0) {
                leaderboard.innerHTML = '<p class="text-gray-500 text-center py-8">No students yet. Add some students to get started!</p>';
                return;
            }

            const sortedStudents = [...students].sort((a, b) => b.totalPoints - a.totalPoints);
            
            leaderboard.innerHTML = `
                <div class="space-y-3">
                    ${sortedStudents.map((student, index) => `
                        <div class="flex items-center justify-between p-3 rounded-lg ${
                            index === 0 ? 'bg-yellow-100 border-2 border-yellow-300' :
                            index === 1 ? 'bg-gray-100 border-2 border-gray-300' :
                            index === 2 ? 'bg-orange-100 border-2 border-orange-300' :
                            'bg-gray-50'
                        }">
                            <div class="flex items-center">
                                <span class="w-8 h-8 rounded-full flex items-center justify-center font-bold mr-3 ${
                                    index === 0 ? 'bg-yellow-500 text-white' :
                                    index === 1 ? 'bg-gray-400 text-white' :
                                    index === 2 ? 'bg-orange-400 text-white' :
                                    'bg-gray-200 text-gray-600'
                                }">
                                    ${index + 1}
                                </span>
                                <div>
                                    <p class="font-semibold">${student.name}</p>
                                    <div class="flex space-x-1">
                                        ${student.dailyProgress.map((day, dayIndex) => `
                                            <div class="flex">
                                                <span class="w-2 h-2 rounded-full ${
                                                    day.question ? 'bg-blue-500' : 'bg-gray-200'
                                                }" title="Question"></span>
                                                <span class="w-2 h-2 rounded-full ml-1 ${
                                                    day.task ? 'bg-green-500' : 'bg-gray-200'
                                                }" title="Task"></span>
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>
                            </div>
                            <span class="font-bold text-lg">${student.totalPoints}</span>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            updateDisplay();
        });
    </script>
</body>
</html>
